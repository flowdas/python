
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>2. 설정 스크립트 작성하기 &#8212; 파이썬 설명서 주석판</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="파이썬 설명서 주석판에서 찾기"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="이 문서 정보" href="../about.html" />
    <link rel="index" title="색인" href="../genindex.html" />
    <link rel="search" title="검색" href="../search.html" />
    <link rel="copyright" title="저작권" href="../copyright.html" />
    <link rel="next" title="3. 설치 구성 파일 작성하기" href="configfile.html" />
    <link rel="prev" title="1. Distutils 소개" href="introduction.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="https://python.flowdas.com/distutils/setupscript.html" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112027364-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-112027364-1');
    </script>
    <style>
      div.admonition-flowdas {
        border-radius: 3px;
        background-color: #ffc;
        border: 1px solid #ff6;
      }
    </style>

    
      
      <script type="text/javascript" src="../_static/switchers.js"></script>
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>

    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
     


  </head><body>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>탐색</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="전체 색인"
             accesskey="I">색인</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 모듈 목록"
             >모듈</a> |</li>
        <li class="right" >
          <a href="configfile.html" title="3. 설치 구성 파일 작성하기"
             accesskey="N">다음</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="1. Distutils 소개"
             accesskey="P">이전</a> |</li>

    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <a href="../index.html">설명서 </a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">파이썬 모듈 배포 (레거시 버전)</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="빠른 검색" type="text" name="q" />
          <input type="submit" value="이동" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="writing-the-setup-script">
<span id="setup-script"></span><h1><span class="section-number">2. </span>설정 스크립트 작성하기<a class="headerlink" href="#writing-the-setup-script" title="제목 주소">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">참고</p>
<p>이 문서는 <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html">https://setuptools.readthedocs.io/en/latest/setuptools.html</a> 의 <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> 설명서가 현재 여기에 포함된 모든 관련 정보를 독립적으로 다루기 전까지만 보존됩니다.</p>
</div>
<p>설정 스크립트는 Distutils를 사용하여 모듈을 빌드, 배포 및 설치하는 모든 활동의 중심입니다. 설정 스크립트의 주요 목적은 여러분의 모듈 배포를 Distutils에 설명하여, 여러분의 모듈에 대해 작동하는 다양한 명령이 올바르게 수행되도록 하는 것입니다. 위의 <a class="reference internal" href="introduction.html#distutils-simple-example"><span class="std std-ref">간단한 예</span></a> 섹션에서 보았듯이, 설정 스크립트는 주로 <code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code>에 대한 호출로 구성되며, 모듈 개발자가 Distutils에 제공하는 대부분의 정보는 <code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code>에 키워드 인자로 제공됩니다.</p>
<p>다음 몇 개의 섹션에서 다룰, 약간 더 개선된 예가 여기 있습니다: Distutils의 자체 설정 스크립트. (Distutils가 파이썬 1.6 이상에 포함되어 있지만, 파이썬 1.5.2 사용자가 다른 모듈 배포판을 설치하는 데 사용할 수 있도록 독립적으로 존재함에 유의하십시오. 여기에 표시된 Distutils의 자체 설정 스크립트는 파이썬 1.5.2에 패키지를 설치하는 데 사용됩니다.)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">distutils.core</span> <span class="k">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Distutils&#39;</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.0&#39;</span><span class="p">,</span>
      <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Python Distribution Utilities&#39;</span><span class="p">,</span>
      <span class="n">author</span><span class="o">=</span><span class="s1">&#39;Greg Ward&#39;</span><span class="p">,</span>
      <span class="n">author_email</span><span class="o">=</span><span class="s1">&#39;gward@python.net&#39;</span><span class="p">,</span>
      <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://www.python.org/sigs/distutils-sig/&#39;</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;distutils&#39;</span><span class="p">,</span> <span class="s1">&#39;distutils.command&#39;</span><span class="p">],</span>
     <span class="p">)</span>
</pre></div>
</div>
<p>이 섹션과 <a class="reference internal" href="introduction.html#distutils-simple-example"><span class="std std-ref">간단한 예</span></a> 섹션에 제시된 간단한 단일 파일 배포판에는 두 가지 차이점이 있습니다: 더 많은 메타 데이터와 모듈이 아니라 패키지를 사용한 순수 파이썬 모듈 명세. 이것은 Distutils가 (지금까지) 두 개의 패키지로 분할된 수십 개의 모듈로 구성되어 있어서 중요합니다; 모든 모듈의 명시적인 목록은 생성하기가 지루하고 유지하기가 어려울 것입니다. 추가 메타 데이터에 대한 자세한 내용은, 섹션 <a class="reference internal" href="#meta-data"><span class="std std-ref">추가 메타 데이터</span></a>를 참조하십시오.</p>
<p>설정 스크립트에 제공된 모든 경로명(파일이나 디렉터리)은 슬래시로 구분된 유닉스 규칙을 사용하여 작성해야 함에 유의하십시오. Distutils는 이 플랫폼 중립적 표현을 실제로 경로명을 사용하기 전에 현재 플랫폼에 적절한 것으로 변환합니다. 이는 운영 체제에 걸쳐 설정 스크립트를 이식성 있게 만드는데, 이것은 물론 Distutils의 주요 목표 중 하나입니다. 이러한 취지로, 이 문서의 모든 경로명은 슬래시로 구분됩니다.</p>
<p>물론, 이것은 Distutils 함수에 주어진 경로명에만 적용됩니다. 예를 들어, <a class="reference internal" href="../library/glob.html#glob.glob" title="glob.glob"><code class="xref py py-func docutils literal notranslate"><span class="pre">glob.glob()</span></code></a>이나 <a class="reference internal" href="../library/os.html#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.listdir()</span></code></a>과 같은 표준 파이썬 함수를 사용하여 파일을 지정하면, 경로 구분자를 하드 코딩 하는 대신 이식성 있는 코드를 작성하도록 주의해야 합니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;mydir&#39;</span><span class="p">,</span> <span class="s1">&#39;subdir&#39;</span><span class="p">,</span> <span class="s1">&#39;*.html&#39;</span><span class="p">))</span>
<span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;mydir&#39;</span><span class="p">,</span> <span class="s1">&#39;subdir&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="listing-whole-packages">
<span id="listing-packages"></span><h2><span class="section-number">2.1. </span>전체 패키지 나열하기<a class="headerlink" href="#listing-whole-packages" title="제목 주소">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">packages</span></code> 옵션은 Distutils가 <code class="docutils literal notranslate"><span class="pre">packages</span></code> 리스트에 언급된 각 패키지에 있는 모든 순수 파이썬 모듈을 처리(빌드, 배포, 설치 등)하도록 지시합니다. 물론 이를 위해서는 패키지 이름과 파일 시스템의 디렉터리 간의 대응 관계가 있어야 합니다. 기본 대응 관계는 가장 분명한 것입니다, 즉, 패키지 <a class="reference internal" href="../library/distutils.html#module-distutils" title="distutils: Support for building and installing Python modules into an existing Python installation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">distutils</span></code></a>는 배포 루트에 상대적인 디렉터리 <code class="file docutils literal notranslate"><span class="pre">distutils</span></code>에서 발견됩니다. 따라서 설정 스크립트에서 <code class="docutils literal notranslate"><span class="pre">packages</span> <span class="pre">=</span> <span class="pre">['foo']</span></code>라고 할 때, Distutils가 설정 스크립트가 있는 디렉터리에 상대적으로 <code class="file docutils literal notranslate"><span class="pre">foo/__init__.py</span></code> 파일(여러분의 시스템에서는 철자가 다를 수 있지만, 무슨 뜻인지는 알 겁니다)을 찾을 것이라고 약속하는 것입니다. 이 약속을 어기면, Distutils는 경고를 표시하지만, 여전히 손상된 패키지를 처리합니다.</p>
<p>다른 규칙을 사용하여 소스 디렉터리를 배치하는 것도 문제가 되지 않습니다: Distutils에 규칙에 대해 알리기 위해 <code class="docutils literal notranslate"><span class="pre">package_dir</span></code> 옵션을 제공하기만 하면 됩니다. 예를 들어, 모든 파이썬 소스를 <code class="file docutils literal notranslate"><span class="pre">lib</span></code> 밑에 유지하여, &quot;루트 패키지&quot;의 모듈(즉, 어떤 패키지에도 속하지 않은 것)은 <code class="file docutils literal notranslate"><span class="pre">lib</span></code>에 있고, <code class="xref py py-mod docutils literal notranslate"><span class="pre">foo</span></code> 패키지의 모듈은 <code class="file docutils literal notranslate"><span class="pre">lib/foo</span></code>에 있고 등등. 그러면 다음을 여러분의 설정 스크립트에 넣습니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">package_dir</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="s1">&#39;lib&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>이 딕셔너리의 키는 패키지 이름이며, 빈 패키지 이름은 루트 패키지를 나타냅니다. 값은 배포 루트에 상대적인 디렉터리 이름입니다. 이 경우, <code class="docutils literal notranslate"><span class="pre">packages</span> <span class="pre">=</span> <span class="pre">['foo']</span></code>라고 할 때, 파일 <code class="file docutils literal notranslate"><span class="pre">lib/foo/__init__.py</span></code>가 존재한다고 약속하는 것입니다.</p>
<p>또 다른 가능한 규칙은 <code class="xref py py-mod docutils literal notranslate"><span class="pre">foo</span></code> 패키지를 <code class="file docutils literal notranslate"><span class="pre">lib</span></code>에, <code class="xref py py-mod docutils literal notranslate"><span class="pre">foo.bar</span></code> 패키지를 <code class="file docutils literal notranslate"><span class="pre">lib/bar</span></code>에 두는 것입니다. 이것은 설치 스크립트에서 다음과 같이 작성됩니다</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">package_dir</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;lib&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">package_dir</span></code> 딕셔너리의 <code class="docutils literal notranslate"><span class="pre">package:</span> <span class="pre">dir</span></code> 항목은 <em>package</em> 아래의 모든 패키지에 묵시적으로 적용되므로, <code class="xref py py-mod docutils literal notranslate"><span class="pre">foo.bar</span></code> 사례는 여기에서 자동으로 처리됩니다. 이 예에서, <code class="docutils literal notranslate"><span class="pre">packages</span> <span class="pre">=</span> <span class="pre">['foo',</span> <span class="pre">'foo.bar']</span></code>가 있으면 Distutils에 <code class="file docutils literal notranslate"><span class="pre">lib/__init__.py</span></code>와 <code class="file docutils literal notranslate"><span class="pre">lib/bar/__init__.py</span></code>를 찾도록 지시합니다. (<code class="docutils literal notranslate"><span class="pre">package_dir</span></code>이 재귀적으로 적용되지만, <code class="docutils literal notranslate"><span class="pre">packages</span></code>의 모든 패키지를 명시적으로 나열해야 함에 유의하십시오: Distutils는 <code class="file docutils literal notranslate"><span class="pre">__init__.py</span></code> 파일이 있는 디렉터리를 찾기 위해 소스 트리를 재귀적으로 스캔하지 <em>않습니다</em>.)</p>
</div>
<div class="section" id="listing-individual-modules">
<span id="listing-modules"></span><h2><span class="section-number">2.2. </span>개별 모듈 나열하기<a class="headerlink" href="#listing-individual-modules" title="제목 주소">¶</a></h2>
<p>소규모 모듈 배포의 경우, 패키지를 나열하는 대신 모든 모듈을 나열하는 것이 좋습니다---특히 &quot;루트 패키지&quot;에 있는 단일 모듈의 경우 (즉, 패키지가 아예 없습니다). 이 가장 간단한 경우는 섹션 <a class="reference internal" href="introduction.html#distutils-simple-example"><span class="std std-ref">간단한 예</span></a>에 표시되었습니다; 다음은 약간 더 개선된 예입니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">py_modules</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mod1&#39;</span><span class="p">,</span> <span class="s1">&#39;pkg.mod2&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>이것은 두 모듈을 기술합니다, 하나는 &quot;루트&quot; 패키지에 있고, 다른 하나는 <code class="xref py py-mod docutils literal notranslate"><span class="pre">pkg</span></code> 패키지에 있습니다. 다시, 기본 패키지/디렉터리 레이아웃은 이 두 모듈이 <code class="file docutils literal notranslate"><span class="pre">mod1.py</span></code>와 <code class="file docutils literal notranslate"><span class="pre">pkg/mod2.py</span></code>에서 발견될 수 있고 <code class="file docutils literal notranslate"><span class="pre">pkg/__init__.py</span></code>도 존재함을 암시합니다. 그리고 다시, <code class="docutils literal notranslate"><span class="pre">package_dir</span></code> 옵션을 사용하여 패키지/디렉터리 대응 관계를 재정의할 수 있습니다.</p>
</div>
<div class="section" id="describing-extension-modules">
<span id="describing-extensions"></span><h2><span class="section-number">2.3. </span>확장 모듈 기술하기<a class="headerlink" href="#describing-extension-modules" title="제목 주소">¶</a></h2>
<p>순수 파이썬 모듈을 작성하는 것보다 파이썬 확장 모듈을 작성하는 것이 조금 더 복잡한 것처럼, 확장 모듈을 Distutils에 설명하는 것은 조금 더 복잡합니다. 순수한 모듈과 달리, 단지 모듈이나 패키지를 나열하고 Distutils가 가서 올바른 파일을 찾을 것으로 기대할 수는 없습니다; 확장 이름, 소스 파일 및 컴파일/링크 요구 사항(인클루드 디렉터리, 링크할 라이브러리 등)을 지정해야 합니다.</p>
<p>이 모든 것은 <code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code>에 대한 또 다른 키워드 인자를 통해 수행됩니다, <code class="docutils literal notranslate"><span class="pre">ext_modules</span></code> 옵션. <code class="docutils literal notranslate"><span class="pre">ext_modules</span></code>는 단지 <a class="reference internal" href="apiref.html#distutils.core.Extension" title="distutils.core.Extension"><code class="xref py py-class docutils literal notranslate"><span class="pre">Extension</span></code></a> 인스턴스의 리스트일 뿐이며, 각각 단일 확장 모듈을 설명합니다. 여러분의 배포판에 <code class="xref py py-mod docutils literal notranslate"><span class="pre">foo</span></code>라는 단일 확장이 포함되어 있고 <code class="file docutils literal notranslate"><span class="pre">foo.c</span></code>로 구현되었다고 가정합시다. 컴파일러/링커에 대한 추가 지침이 필요하지 않으면, 이 확장을 설명하는 것은 매우 간단합니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo.c&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Extension</span></code> 클래스는 <code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code>과 함께 <a class="reference internal" href="apiref.html#module-distutils.core" title="distutils.core: The core Distutils functionality"><code class="xref py py-mod docutils literal notranslate"><span class="pre">distutils.core</span></code></a>에서 임포트 할 수 있습니다. 따라서, 이 하나의 확장만 포함하고 다른 것은 포함하지 않는 모듈 배포판의 설정 스크립트는 다음과 같습니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">distutils.core</span> <span class="k">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">Extension</span>
<span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.0&#39;</span><span class="p">,</span>
      <span class="n">ext_modules</span><span class="o">=</span><span class="p">[</span><span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo.c&#39;</span><span class="p">])],</span>
      <span class="p">)</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Extension</span></code> 클래스(실제로는, <strong class="command">build_ext</strong> 명령으로 구현된 하부 확장 빌드 시스템)는 파이썬 확장을 설명하는 데 많은 유연성을 지원하고, 다음 섹션에서 설명합니다.</p>
<div class="section" id="extension-names-and-packages">
<h3><span class="section-number">2.3.1. </span>확장 이름과 패키지<a class="headerlink" href="#extension-names-and-packages" title="제목 주소">¶</a></h3>
<p><a class="reference internal" href="apiref.html#distutils.core.Extension" title="distutils.core.Extension"><code class="xref py py-class docutils literal notranslate"><span class="pre">Extension</span></code></a> 생성자에 대한 첫 번째 인자는 항상 패키지 이름을 포함한 확장의 이름입니다. 예를 들면,</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;src/foo1.c&#39;</span><span class="p">,</span> <span class="s1">&#39;src/foo2.c&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>는 루트 패키지에 있는 확장을 설명하지만,</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;pkg.foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;src/foo1.c&#39;</span><span class="p">,</span> <span class="s1">&#39;src/foo2.c&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>는 <code class="xref py py-mod docutils literal notranslate"><span class="pre">pkg</span></code> 패키지에 있는 같은 확장을 설명합니다. 소스 파일과 결과 객체 코드는 두 경우 모두 동일합니다; 유일한 차이점은 결과 확장이 존재할 파일 시스템에서의 위치(그리고 파이썬의 이름 공간 계층에서의 위치)입니다.</p>
<p>모두 같은 패키지에 있는 여러 개의 확장이 있으면 (또는 모두 같은 베이스 패키지 아래), <code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code>에 <code class="docutils literal notranslate"><span class="pre">ext_package</span></code> 키워드 인자를 사용하십시오. 예를 들면,</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
      <span class="n">ext_package</span><span class="o">=</span><span class="s1">&#39;pkg&#39;</span><span class="p">,</span>
      <span class="n">ext_modules</span><span class="o">=</span><span class="p">[</span><span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo.c&#39;</span><span class="p">]),</span>
                   <span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;subpkg.bar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;bar.c&#39;</span><span class="p">])],</span>
     <span class="p">)</span>
</pre></div>
</div>
<p>는 <code class="file docutils literal notranslate"><span class="pre">foo.c</span></code>를 확장 <code class="xref py py-mod docutils literal notranslate"><span class="pre">pkg.foo</span></code>로, <code class="file docutils literal notranslate"><span class="pre">bar.c</span></code>를 <code class="xref py py-mod docutils literal notranslate"><span class="pre">pkg.subpkg.bar</span></code>로 컴파일합니다.</p>
</div>
<div class="section" id="extension-source-files">
<h3><span class="section-number">2.3.2. </span>확장 소스 파일<a class="headerlink" href="#extension-source-files" title="제목 주소">¶</a></h3>
<p><a class="reference internal" href="apiref.html#distutils.core.Extension" title="distutils.core.Extension"><code class="xref py py-class docutils literal notranslate"><span class="pre">Extension</span></code></a> 생성자에 대한 두 번째 인자는 소스 파일 리스트입니다. Distutils는 현재 C, C++ 및 Objective-C 확장만 지원하므로, 일반적으로 C/C++/Objective-C 소스 파일입니다. (C++ 소스 파일을 구별하기 위해 적절한 확장자를 사용해야 합니다: <code class="file docutils literal notranslate"><span class="pre">.cc</span></code>와 <code class="file docutils literal notranslate"><span class="pre">.cpp</span></code>는 유닉스와 윈도우 컴파일러 모두에서 인식되는 것 같습니다.)</p>
<p>그러나, 리스트에 SWIG 인터페이스 (<code class="file docutils literal notranslate"><span class="pre">.i</span></code>) 파일을 포함할 수도 있습니다; <strong class="command">build_ext</strong> 명령은 SWIG 확장을 처리하는 방법을 알고 있습니다: 인터페이스 파일에 대해 SWIG을 실행하고 결과 C/C++ 파일을 확장으로 컴파일합니다.</p>
<p>이 경고에도 불구하고, SWIG에 대한 옵션은 현재 다음과 같이 전달될 수 있습니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
      <span class="n">ext_modules</span><span class="o">=</span><span class="p">[</span><span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;_foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo.i&#39;</span><span class="p">],</span>
                             <span class="n">swig_opts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-modern&#39;</span><span class="p">,</span> <span class="s1">&#39;-I../include&#39;</span><span class="p">])],</span>
      <span class="n">py_modules</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span>
     <span class="p">)</span>
</pre></div>
</div>
<p>또는 다음과 같이 명령 줄에서:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_ext</span> <span class="o">--</span><span class="n">swig</span><span class="o">-</span><span class="n">opts</span><span class="o">=</span><span class="s2">&quot;-modern -I../include&quot;</span>
</pre></div>
</div>
<p>일부 플랫폼에서는, 컴파일러에서 처리되고 확장에 포함되는 비 소스 파일을 포함할 수 있습니다. 현재, 이것은 Visual C++ 용 윈도우 메시지 텍스트 (<code class="file docutils literal notranslate"><span class="pre">.mc</span></code>) 파일과 리소스 정의 (<code class="file docutils literal notranslate"><span class="pre">.rc</span></code>) 파일을 의미합니다. 이들은 바이너리 리소스 (<code class="file docutils literal notranslate"><span class="pre">.res</span></code>) 파일로 컴파일되고 실행 파일에 링크됩니다.</p>
</div>
<div class="section" id="preprocessor-options">
<h3><span class="section-number">2.3.3. </span>전 처리기 옵션<a class="headerlink" href="#preprocessor-options" title="제목 주소">¶</a></h3>
<p><a class="reference internal" href="apiref.html#distutils.core.Extension" title="distutils.core.Extension"><code class="xref py py-class docutils literal notranslate"><span class="pre">Extension</span></code></a>에 대한 세 가지 선택적 인자는 검색할 인클루드 디렉터리나 정의/정의 해제할 전 처리기 매크로를 지정해야 하는 경우 도움이 됩니다: <code class="docutils literal notranslate"><span class="pre">include_dirs</span></code>, <code class="docutils literal notranslate"><span class="pre">define_macros</span></code> 및 <code class="docutils literal notranslate"><span class="pre">undef_macros</span></code>.</p>
<p>예를 들어, 확장에 배포 루트 아래의 <code class="file docutils literal notranslate"><span class="pre">include</span></code> 디렉터리에 있는 헤더 파일이 필요한 경우, <code class="docutils literal notranslate"><span class="pre">include_dirs</span></code> 옵션을 사용하십시오:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo.c&#39;</span><span class="p">],</span> <span class="n">include_dirs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;include&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>거기에 절대 디렉터리를 지정할 수 있습니다; X11R6이 <code class="file docutils literal notranslate"><span class="pre">/usr</span></code>에 설치된 유닉스 시스템에서만 확장이 빌드된다는 것을 알고 있다면, 다음과 같이 할 수 있습니다</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo.c&#39;</span><span class="p">],</span> <span class="n">include_dirs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;/usr/include/X11&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>코드를 배포하려는 경우 이런 종류의 이식성 없는 사용을 피해야 합니다: 다음과 같은 C 코드를 작성하는 것이 좋습니다</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;X11/Xlib.h&gt;</span>
</pre></div>
</div>
<p>다른 파이썬 확장의 헤더 파일을 포함해야 하는 경우, Distutils <strong class="command">install_headers</strong> 명령으로 헤더 파일이 일관된 방식으로 설치된다는 사실을 이용할 수 있습니다. 예를 들어, Numerical Python 헤더 파일은 (표준 유닉스 설치 시) <code class="file docutils literal notranslate"><span class="pre">/usr/local/include/python1.5/Numerical</span></code>에 설치됩니다. (정확한 위치는 플랫폼과 파이썬 설치에 따라 다릅니다.) 파이썬 인클루드 디렉터리---이 경우 <code class="file docutils literal notranslate"><span class="pre">/usr/local/include/python1.5</span></code>---는 파이썬 확장을 빌드할 때 항상 검색 경로에 포함되므로, 다음과 같이 C 코드를 작성하는 것이 가장 좋습니다</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;Numerical/arrayobject.h&gt;</span>
</pre></div>
</div>
<p><code class="file docutils literal notranslate"><span class="pre">Numerical</span></code> 인클루드 디렉터리를 헤더 검색 경로에 바로 넣어야 하면, Distutils <a class="reference internal" href="apiref.html#module-distutils.sysconfig" title="distutils.sysconfig: Low-level access to configuration information of the Python interpreter."><code class="xref py py-mod docutils literal notranslate"><span class="pre">distutils.sysconfig</span></code></a> 모듈을 사용하여 해당 디렉터리를 찾을 수 있습니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">distutils.sysconfig</span> <span class="k">import</span> <span class="n">get_python_inc</span>
<span class="n">incdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_python_inc</span><span class="p">(</span><span class="n">plat_specific</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;Numerical&#39;</span><span class="p">)</span>
<span class="n">setup</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
      <span class="n">Extension</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">include_dirs</span><span class="o">=</span><span class="p">[</span><span class="n">incdir</span><span class="p">]),</span>
      <span class="p">)</span>
</pre></div>
</div>
<p>이것은 꽤 이식성 있지만---플랫폼과 관계없이, 모든 파이썬 설치에서 작동합니다---C 코드를 현명하게 작성하기가 더 쉽습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">define_macros</span></code>와 <code class="docutils literal notranslate"><span class="pre">undef_macros</span></code> 옵션을 사용하여 전 처리기 매크로를 정의하고 정의를 해제할 수 있습니다. <code class="docutils literal notranslate"><span class="pre">define_macros</span></code>는 <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">value)</span></code> 튜플의 리스트를 취합니다, 여기서 <code class="docutils literal notranslate"><span class="pre">name</span></code>은 정의할 매크로의 이름(문자열)이고 <code class="docutils literal notranslate"><span class="pre">value</span></code>는 값입니다: 문자열이거나 <code class="docutils literal notranslate"><span class="pre">None</span></code>. (매크로 <code class="docutils literal notranslate"><span class="pre">FOO</span></code>를 <code class="docutils literal notranslate"><span class="pre">None</span></code>으로 정의하는 것은 C 소스에서 값이 없는 <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">FOO</span></code>와 같습니다: 대부분의 컴파일러에서는 <code class="docutils literal notranslate"><span class="pre">FOO</span></code>를 문자열 <code class="docutils literal notranslate"><span class="pre">1</span></code>로 설정합니다.) <code class="docutils literal notranslate"><span class="pre">undef_macros</span></code>는 정의 해제할 매크로의 리스트입니다.</p>
<p>예를 들면:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
          <span class="n">define_macros</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;NDEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s1">&#39;HAVE_STRFTIME&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)],</span>
          <span class="n">undef_macros</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HAVE_FOO&#39;</span><span class="p">,</span> <span class="s1">&#39;HAVE_BAR&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>는 모든 C 소스 파일의 맨 위에 다음과 같은 것을 넣는 것과 동등합니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#define NDEBUG 1</span>
<span class="c1">#define HAVE_STRFTIME</span>
<span class="c1">#undef HAVE_FOO</span>
<span class="c1">#undef HAVE_BAR</span>
</pre></div>
</div>
</div>
<div class="section" id="library-options">
<h3><span class="section-number">2.3.4. </span>라이브러리 옵션<a class="headerlink" href="#library-options" title="제목 주소">¶</a></h3>
<p>확장을 빌드할 때 링크할 라이브러리와 해당 라이브러리를 검색할 디렉터리를 지정할 수도 있습니다. <code class="docutils literal notranslate"><span class="pre">libraries</span></code> 옵션은 링크할 라이브러리의 리스트이고, <code class="docutils literal notranslate"><span class="pre">library_dirs</span></code>는 링크 시점에 라이브러리를 검색할 디렉터리 리스트이고, <code class="docutils literal notranslate"><span class="pre">runtime_library_dirs</span></code>는 실행 시간에 공유 (동적으로 로드된) 라이브러리를 검색할 디렉터리 리스트입니다.</p>
<p>예를 들어, 대상 시스템의 표준 라이브러리 검색 경로에 있는 것으로 알려진 라이브러리와 링크해야 하면</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
          <span class="n">libraries</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gdbm&#39;</span><span class="p">,</span> <span class="s1">&#39;readline&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>비표준 위치의 라이브러리와 링크해야 하면, <code class="docutils literal notranslate"><span class="pre">library_dirs</span></code>에 위치를 포함해야 합니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
          <span class="n">library_dirs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;/usr/X11R6/lib&#39;</span><span class="p">],</span>
          <span class="n">libraries</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;X11&#39;</span><span class="p">,</span> <span class="s1">&#39;Xt&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>(다시, 코드를 배포하려는 경우 이러한 이식성 없는 구성은 피해야 합니다.)</p>
</div>
<div class="section" id="other-options">
<h3><span class="section-number">2.3.5. </span>다른 옵션<a class="headerlink" href="#other-options" title="제목 주소">¶</a></h3>
<p>특수한 경우를 처리하는 데 사용할 수 있는 다른 옵션이 아직 남아있습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">optional</span></code> 옵션은 불리언입니다. 참이면, 그 확장에서의 빌드 실패는 빌드 프로세스를 중단시키지 않고 대신 실패한 확장을 설치하지 않습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">extra_objects</span></code> 옵션은 링커에 전달할 객체 파일의 리스트입니다. 컴파일러의 기본 확장자가 사용되므로 이러한 파일에는 확장자가 없어야 합니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">extra_compile_args</span></code>와 <code class="docutils literal notranslate"><span class="pre">extra_link_args</span></code>를 사용하여 해당 컴파일러와 링커 명령 줄에 대한 추가 명령 줄 옵션을 지정할 수 있습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">export_symbols</span></code>는 윈도우에서만 유용합니다. 내보낼 심볼 (함수나 변수) 목록을 포함할 수 있습니다. 컴파일된 확장을 빌드할 때는 이 옵션이 필요하지 않습니다: Distutils는 내 보내는 심볼 목록에 <code class="docutils literal notranslate"><span class="pre">initmodule</span></code>을 자동으로 추가합니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">depends</span></code> 옵션은 확장이 의존하는 파일의 리스트입니다 (예를 들어 헤더 파일). build 명령은 이전 빌드 이후 이 파일들에 수정된 파일이 있으면 소스에 대해 컴파일러를 호출하여 확장을 다시 빌드합니다.</p>
</div>
</div>
<div class="section" id="relationships-between-distributions-and-packages">
<h2><span class="section-number">2.4. </span>배포판과 패키지의 관계<a class="headerlink" href="#relationships-between-distributions-and-packages" title="제목 주소">¶</a></h2>
<p>배포판은 세 가지 방법으로 패키지와 관련될 수 있습니다:</p>
<ol class="arabic simple">
<li><p>패키지나 모듈이 필요할 수 있습니다.</p></li>
<li><p>패키지나 모듈을 제공할 수 있습니다.</p></li>
<li><p>패키지나 모듈을 폐기(obsolete)할 수 있습니다.</p></li>
</ol>
<p>이러한 관계는 <a class="reference internal" href="apiref.html#distutils.core.setup" title="distutils.core.setup"><code class="xref py py-func docutils literal notranslate"><span class="pre">distutils.core.setup()</span></code></a> 함수에 키워드 인자를 사용하여 지정할 수 있습니다.</p>
<p><em>requires</em> 키워드 인자를 <code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code>에 제공하여 다른 파이썬 모듈과 패키지에 대한 의존성을 지정할 수 있습니다. 값은 문자열 리스트여야 합니다. 각 문자열은 필요한 패키지와 선택적으로 충분한 버전을 지정합니다.</p>
<p>모듈이나 패키지의 임의의 버전이 필요하도록 지정하려면, 문자열은 모듈이나 패키지 이름으로만 구성되어야 합니다. 예로는 <code class="docutils literal notranslate"><span class="pre">'mymodule'</span></code>과 <code class="docutils literal notranslate"><span class="pre">'xml.parsers.expat'</span></code>이 있습니다.</p>
<p>특정 버전이 필요하면, 일련의 한정자를 괄호 안에 제공할 수 있습니다. 각 한정자는 비교 연산자와 버전 번호로 구성될 수 있습니다. 허용되는 비교 연산자는 다음과 같습니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span>    <span class="o">&gt;</span>    <span class="o">==</span>
<span class="o">&lt;=</span>   <span class="o">&gt;=</span>   <span class="o">!=</span>
</pre></div>
</div>
<p>쉼표(와 선택적인 공백)로 구분된 여러 한정자를 사용하여 결합 할 수 있습니다. 이 경우, 모든 한정자가 일치해야 합니다; 논리적 AND가 평가를 결합하는 데 사용됩니다.</p>
<p>여러 가지 예를 살펴보겠습니다:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Requires 표현식</p></th>
<th class="head"><p>설명</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">==1.0</span></code></p></td>
<td><p>버전 <code class="docutils literal notranslate"><span class="pre">1.0</span></code>만 호환됩니다</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;1.0,</span> <span class="pre">!=1.5.1,</span> <span class="pre">&lt;2.0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code> 이후와 <code class="docutils literal notranslate"><span class="pre">2.0</span></code> 이전의 모든 버전이 호환됩니다, <code class="docutils literal notranslate"><span class="pre">1.5.1</span></code>은 제외</p></td>
</tr>
</tbody>
</table>
<p>이제 의존성을 지정할 수 있으니, 다른 배포에 필요한 것을 제공할 수도 있어야 합니다. 이는 <code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code>에 <em>provides</em> 키워드 인자를 사용하여 수행됩니다. 이 키워드의 값은 문자열의 리스트이며, 각 문자열은 파이썬 모듈이나 패키지의 이름이며, 선택적으로 버전을 식별합니다. 버전을 지정하지 않으면, 배포판의 버전과 일치하는 것으로 간주합니다.</p>
<p>몇 가지 예:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Provides 표현식</p></th>
<th class="head"><p>설명</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mypkg</span></code></p></td>
<td><p>배포판 버전을 사용하여, <code class="docutils literal notranslate"><span class="pre">mypkg</span></code>를 제공합니다</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mypkg</span> <span class="pre">(1.1)</span></code></p></td>
<td><p>배포판 버전과 관계없이, <code class="docutils literal notranslate"><span class="pre">mypkg</span></code> 버전 1.1을 제공합니다</p></td>
</tr>
</tbody>
</table>
<p>패키지는 <em>obsoletes</em> 키워드 인자를 사용하여 다른 패키지를 폐기한다고 선언할 수 있습니다. 이것의 값은 <em>requires</em> 키워드의 값과 유사합니다: 모듈이나 패키지 지정자를 제공하는 문자열의 리스트. 각 지정자는 모듈이나 패키지 이름으로 구성되고 선택적으로 하나 이상의 버전 한정자가 뒤따릅니다. 버전 한정자는 모듈이나 패키지 이름 다음에 괄호 안에 주어집니다.</p>
<p>한정자에 의해 식별된 버전은 기술 중인 배포판에 의해 폐기되는 버전입니다. 한정자가 제공되지 않으면, 명명된 모듈이나 패키지의 모든 버전이 폐기되는 것으로 이해됩니다.</p>
</div>
<div class="section" id="installing-scripts">
<span id="distutils-installing-scripts"></span><h2><span class="section-number">2.5. </span>스크립트 설치하기<a class="headerlink" href="#installing-scripts" title="제목 주소">¶</a></h2>
<p>지금까지 우리는 순수하거나 순수하지 않은 파이썬 모듈을 다루어 왔는데, 보통은 그 스스로 실행하지 않고 스크립트가 임포트 합니다.</p>
<p>스크립트는 명령 줄에서 시작하려는 의도로 만들어진, 파이썬 소스 코드를 포함하는 파일입니다. 스크립트는 Distutils가 매우 복잡한 작업을 수행하도록 요구하지는 않습니다. 유일한 영리한 기능은 스크립트의 첫 번째 줄이 <code class="docutils literal notranslate"><span class="pre">#!</span></code>로 시작하고 단어 &quot;python&quot;을 포함하면, Distutils가 첫 번째 줄을 조정하여 현재 인터프리터 위치를 참조하도록 만든다는 것입니다. 기본적으로, 현재 인터프리터 위치로 바뀝니다. <code class="xref std std-option docutils literal notranslate"><span class="pre">--executable</span></code> (또는 <code class="xref std std-option docutils literal notranslate"><span class="pre">-e</span></code>) 옵션을 사용하면 인터프리터 경로를 명시적으로 재정의할 수 있습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">scripts</span></code> 옵션은 단순히 이런 방식으로 처리할 파일의 리스트입니다. PyXML 설정 스크립트에서:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
      <span class="n">scripts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;scripts/xmlproc_parse&#39;</span><span class="p">,</span> <span class="s1">&#39;scripts/xmlproc_val&#39;</span><span class="p">]</span>
      <span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">버전 3.1에서 변경: </span>템플릿이 제공되지 않으면 모든 스크립트가 <code class="docutils literal notranslate"><span class="pre">MANIFEST</span></code> 파일에 추가됩니다. <a class="reference internal" href="sourcedist.html#manifest"><span class="std std-ref">배포할 파일 지정하기</span></a>를 참조하십시오.</p>
</div>
</div>
<div class="section" id="installing-package-data">
<span id="distutils-installing-package-data"></span><h2><span class="section-number">2.6. </span>패키지 데이터 설치하기<a class="headerlink" href="#installing-package-data" title="제목 주소">¶</a></h2>
<p>종종, 추가 파일을 패키지에 설치해야 합니다. 이러한 파일은 종종 패키지 구현과 밀접한 관련이 있는 데이터, 또는 패키지를 사용하는 프로그래머가 관심을 가질 설명서가 포함된 텍스트 파일입니다. 이러한 파일을 <em class="dfn">패키지 데이터(package data)</em>라고 합니다.</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code> 함수에 <code class="docutils literal notranslate"><span class="pre">package_data</span></code> 키워드 인자를 사용하여 패키지 데이터를 패키지에 추가할 수 있습니다. 값은 패키지 이름에서 패키지로 복사해야 하는 상대 경로 이름의 리스트로의 매핑이어야 합니다. 경로는 패키지를 포함하는 디렉터리에 상대적으로 해석됩니다 (적절하면 <code class="docutils literal notranslate"><span class="pre">package_dir</span></code> 매핑의 정보가 사용됩니다); 즉, 파일은 소스 디렉터리에서 패키지 일부가 될 것으로 예상됩니다. glob 패턴도 포함할 수 있습니다.</p>
<p>경로 이름에는 디렉터리 부분이 포함될 수 있습니다; 모든 필요한 디렉터리가 설치 시에 만들어집니다.</p>
<p>예를 들어, 패키지에 여러 데이터 파일이 있는 서브 디렉터리가 있어야 하면, 소스 트리에서 다음과 같이 파일을 배열할 수 있습니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">src</span><span class="o">/</span>
    <span class="n">mypkg</span><span class="o">/</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="n">module</span><span class="o">.</span><span class="n">py</span>
        <span class="n">data</span><span class="o">/</span>
            <span class="n">tables</span><span class="o">.</span><span class="n">dat</span>
            <span class="n">spoons</span><span class="o">.</span><span class="n">dat</span>
            <span class="n">forks</span><span class="o">.</span><span class="n">dat</span>
</pre></div>
</div>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">setup()</span></code>에 대한 해당 호출은 다음과 같습니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mypkg&#39;</span><span class="p">],</span>
      <span class="n">package_dir</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;mypkg&#39;</span><span class="p">:</span> <span class="s1">&#39;src/mypkg&#39;</span><span class="p">},</span>
      <span class="n">package_data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;mypkg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;data/*.dat&#39;</span><span class="p">]},</span>
      <span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">버전 3.1에서 변경: </span>템플릿이 제공되지 않으면 <code class="docutils literal notranslate"><span class="pre">package_data</span></code>와 일치하는 모든 파일이 <code class="docutils literal notranslate"><span class="pre">MANIFEST</span></code> 파일에 추가됩니다. <a class="reference internal" href="sourcedist.html#manifest"><span class="std std-ref">배포할 파일 지정하기</span></a>를 참조하십시오.</p>
</div>
</div>
<div class="section" id="installing-additional-files">
<span id="distutils-additional-files"></span><h2><span class="section-number">2.7. </span>추가 파일 설치하기<a class="headerlink" href="#installing-additional-files" title="제목 주소">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">data_files</span></code> 옵션은 모듈 배포에 필요한 추가 파일을 지정하는 데 사용할 수 있습니다: 구성 파일, 메시지 카탈로그, 데이터 파일, 이전 범주에 맞지 않는 모든 것.</p>
<p><code class="docutils literal notranslate"><span class="pre">data_files</span></code>는 다음과 같은 방식으로 (<em>directory</em>, <em>files</em>) 쌍의 시퀀스를 지정합니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
      <span class="n">data_files</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;bitmaps&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;bm/b1.gif&#39;</span><span class="p">,</span> <span class="s1">&#39;bm/b2.gif&#39;</span><span class="p">]),</span>
                  <span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;cfg/data.cfg&#39;</span><span class="p">])],</span>
     <span class="p">)</span>
</pre></div>
</div>
<p>시퀀스의 각 (<em>directory</em>, <em>files</em>) 쌍은 설치 디렉터리와 그곳에 설치할 파일을 지정합니다.</p>
<p><em>files</em>의 각 파일 이름은 패키지 소스 배포의 맨 위에 있는 <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> 스크립트에 상대적으로 해석됩니다. 데이터 파일이 설치될 디렉터리를 지정할 수 있지만 데이터 파일 자체의 이름을 바꿀 수는 없음에 유의하십시오.</p>
<p><em>directory</em>는 상대 경로여야 합니다. 설치 접두사(시스템 설치의 경우 파이썬의 <code class="docutils literal notranslate"><span class="pre">sys.prefix</span></code>; 사용자 설치의 경우 <code class="docutils literal notranslate"><span class="pre">site.USER_BASE</span></code>)에 상대적으로 해석됩니다. Distutils는 <em>directory</em>에 절대 설치 경로를 허용하지만, 휠(wheel) 패키징 형식과 호환되지 않아서 권장하지 않습니다. 설치되는 파일의 최종 위치를 판별하기 위해 <em>files</em>의 디렉터리 정보가 사용되지 않습니다; 파일 이름 만 사용됩니다.</p>
<p>대상 디렉터리를 지정하지 않고 <code class="docutils literal notranslate"><span class="pre">data_files</span></code> 옵션을 간단한 files의 시퀀스로 지정할 수 있지만, 이 방법은 권장되지 않으며, 이 경우 <strong class="command">install</strong> 명령은 경고를 인쇄합니다. 대상 디렉터리에 데이터 파일을 직접 설치하려면, directory에 빈 문자열을 지정해야 합니다.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">버전 3.1에서 변경: </span>템플릿이 제공되지 않으면 <code class="docutils literal notranslate"><span class="pre">data_files</span></code>와 일치하는 모든 파일이 <code class="docutils literal notranslate"><span class="pre">MANIFEST</span></code> 파일에 추가됩니다. <a class="reference internal" href="sourcedist.html#manifest"><span class="std std-ref">배포할 파일 지정하기</span></a>를 참조하십시오.</p>
</div>
</div>
<div class="section" id="additional-meta-data">
<span id="meta-data"></span><h2><span class="section-number">2.8. </span>추가 메타 데이터<a class="headerlink" href="#additional-meta-data" title="제목 주소">¶</a></h2>
<p>설정 스크립트에는 이름과 버전 이외의 추가 메타 데이터가 포함될 수 있습니다. 이 정보에는 다음이 포함됩니다:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 36%" />
<col style="width: 23%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>메타 데이터</p></th>
<th class="head"><p>설명</p></th>
<th class="head"><p>값</p></th>
<th class="head"><p>노트</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>패키지 이름</p></td>
<td><p>짧은 문자열</p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">version</span></code></p></td>
<td><p>이 릴리스의 버전</p></td>
<td><p>짧은 문자열</p></td>
<td><p>(1)(2)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">author</span></code></p></td>
<td><p>패키지 저자의 이름</p></td>
<td><p>짧은 문자열</p></td>
<td><p>(3)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">author_email</span></code></p></td>
<td><p>패키지 저자의 이메일 주소</p></td>
<td><p>이메일 주소</p></td>
<td><p>(3)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">maintainer</span></code></p></td>
<td><p>패키지 관리자의 이름</p></td>
<td><p>짧은 문자열</p></td>
<td><p>(3)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">maintainer_email</span></code></p></td>
<td><p>패키지 관리자의 이메일 주소</p></td>
<td><p>이메일 주소</p></td>
<td><p>(3)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>패키지 홈페이지</p></td>
<td><p>URL</p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td><p>패키지에 대한 짧은 요약 설명</p></td>
<td><p>짧은 문자열</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">long_description</span></code></p></td>
<td><p>패키지에 대한 자세한 설명</p></td>
<td><p>긴 문자열</p></td>
<td><p>(4)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">download_url</span></code></p></td>
<td><p>패키지를 다운로드할 수 있는 위치</p></td>
<td><p>URL</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">classifiers</span></code></p></td>
<td><p>범주 목록</p></td>
<td><p>문자열의 리스트</p></td>
<td><p>(6)(7)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">platforms</span></code></p></td>
<td><p>플랫폼 목록</p></td>
<td><p>문자열의 리스트</p></td>
<td><p>(6)(8)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keywords</span></code></p></td>
<td><p>키워드의 리스트</p></td>
<td><p>문자열의 리스트</p></td>
<td><p>(6)(8)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">license</span></code></p></td>
<td><p>패키지 라이선스</p></td>
<td><p>짧은 문자열</p></td>
<td><p>(5)</p></td>
</tr>
</tbody>
</table>
<p>노트:</p>
<ol class="arabic simple">
<li><p>이 필드는 필수입니다.</p></li>
<li><p>버전은 <em>major.minor[.patch[.sub]]</em> 형식을 사용하는 것이 좋습니다.</p></li>
<li><p>author나 maintainer를 식별해야 합니다. maintainer가 제공되면, distutils는 이를 <code class="file docutils literal notranslate"><span class="pre">PKG-INFO</span></code>에 저자로 나열합니다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">long_description</span></code> 필드는 패키지를 게시할 때 PyPI에서 프로젝트 페이지를 빌드하는 데 사용됩니다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">license</span></code> 필드는 라이선스가 &quot;License&quot; Trove 분류에서 선택되지 않았을 때 패키지에 대한 라이선스를 나타내는 텍스트입니다. <code class="docutils literal notranslate"><span class="pre">Classifier</span></code> 필드를 참조하십시오. 폐지되었지만 여전히 <code class="docutils literal notranslate"><span class="pre">license</span></code>의 별칭으로 작동하는 <code class="docutils literal notranslate"><span class="pre">licence</span></code> 배포 옵션이 있음에 유의하십시오.</p></li>
<li><p>이 필드는 리스트여야 합니다.</p></li>
<li><p>유효한 분류자는 <a class="reference external" href="https://pypi.org/classifiers">PyPI</a>에 나열되어 있습니다.</p></li>
<li><p>이전 버전과의 호환성을 유지하기 위해, 이 필드는 문자열도 허용합니다. 쉼표로 구분된 문자열 <code class="docutils literal notranslate"><span class="pre">'foo,</span> <span class="pre">bar'</span></code>를 전달하면, <code class="docutils literal notranslate"><span class="pre">['foo',</span> <span class="pre">'bar']</span></code>로 변환되고, 그렇지 않으면, 하나의 문자열 리스트로 변환됩니다.</p></li>
</ol>
<dl class="simple">
<dt>'짧은 문자열'</dt><dd><p>한 줄의 텍스트, 200자 이하.</p>
</dd>
<dt>'긴 문자열'</dt><dd><p>reStructuredText 형식의 여러 줄 단순 텍스트 (<a class="reference external" href="http://docutils.sourceforge.net/">http://docutils.sourceforge.net/</a> 을 참조하십시오).</p>
</dd>
<dt>'문자열의 리스트'</dt><dd><p>아래를 참조하십시오.</p>
</dd>
</dl>
<p>버전 정보를 인코딩하는 것은 그 자체로 기술입니다. 파이썬 패키지는 일반적으로 <em>major.minor[.patch][sub]</em> 버전 형식을 따릅니다. 소프트웨어의 초기 실험 릴리스의 major 번호는 0입니다. 패키지의 주요 이정표를 나타내는 릴리스마다 증가합니다. 중요한 새로운 기능이 패키지에 추가되면 minor 번호가 증가합니다. 버그 수정이 릴리스 되면 patch 번호가 증가합니다. 서브 릴리스를 나타내는 데 추가 후행 버전 정보가 사용되기도 합니다. 이것들은 &quot;a1,a2,...,aN&quot; (기능과 API가 변경될 수 있는 알파 릴리스의 경우), &quot;b1,b2,...,bN&quot; (버그만 수정하는 베타 릴리스의 경우) 및 &quot;pr1,pr2,...,prN&quot; (최종 사전 릴리스 테스트 용) 입니다. 몇 가지 예:</p>
<dl class="simple">
<dt>0.1.0</dt><dd><p>패키지의 첫 번째 실험 릴리스</p>
</dd>
<dt>1.0.1a2</dt><dd><p>1.0의 첫 번째 패치 버전의 두 번째 알파 릴리스</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">classifiers</span></code>는 리스트로 지정해야 합니다:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
      <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
          <span class="s1">&#39;Development Status :: 4 - Beta&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Environment :: Console&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Environment :: Web Environment&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Intended Audience :: End Users/Desktop&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Intended Audience :: Developers&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Intended Audience :: System Administrators&#39;</span><span class="p">,</span>
          <span class="s1">&#39;License :: OSI Approved :: Python Software Foundation License&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Operating System :: MacOS :: MacOS X&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Operating System :: Microsoft :: Windows&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Operating System :: POSIX&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Topic :: Communications :: Email&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Topic :: Office/Business&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Topic :: Software Development :: Bug Tracking&#39;</span><span class="p">,</span>
          <span class="p">],</span>
      <span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">버전 3.7에서 변경: </span><a class="reference internal" href="apiref.html#distutils.core.setup" title="distutils.core.setup"><code class="xref py py-class docutils literal notranslate"><span class="pre">setup</span></code></a>은 이제 <code class="docutils literal notranslate"><span class="pre">classifiers</span></code>, <code class="docutils literal notranslate"><span class="pre">keywords</span></code> 또는 <code class="docutils literal notranslate"><span class="pre">platforms</span></code> 필드가 리스트나 문자열로 지정되지 않으면 경고합니다.</p>
</div>
</div>
<div class="section" id="debugging-the-setup-script">
<span id="debug-setup-script"></span><h2><span class="section-number">2.9. </span>설정 스크립트 디버깅하기<a class="headerlink" href="#debugging-the-setup-script" title="제목 주소">¶</a></h2>
<p>때때로 문제가 발생하고, 설치 스크립트가 개발자가 원하는 것을 수행하지 않습니다.</p>
<p>Distutils는 설정 스크립트를 실행할 때 모든 예외를 포착하고, 스크립트가 종료되기 전에 간단한 에러 메시지를 인쇄합니다. 이 동작의 동기는 파이썬에 대해 잘 모르고 패키지를 설치하려는 관리자를 혼동하지 않도록 하는 것입니다. Distutils의 내부로부터의 크고 긴 트레이스백을 얻으면, 끝까지 읽어서 권한 문제라는 것을 알아차리지 못하고 패키지나 파이썬 설치가 손상되었다고 생각할 수 있습니다.</p>
<p>반면에, 이것은 개발자가 실패의 원인을 찾는 데 도움이 되지 않습니다. 이를 위해, <span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DISTUTILS_DEBUG</span></code> 환경 변수를 빈 문자열 이외의 것으로 설정할 수 있으며, distutils는 현재 수행 중인 작업에 대한 자세한 정보를 인쇄하고, 예외가 발생하면 전체 트레이스백을 덤프하며, 외부 프로그램(C 컴파일러와 같은)이 실패할 때 전체 명령 줄을 인쇄합니다.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">목차</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. 설정 스크립트 작성하기</a><ul>
<li><a class="reference internal" href="#listing-whole-packages">2.1. 전체 패키지 나열하기</a></li>
<li><a class="reference internal" href="#listing-individual-modules">2.2. 개별 모듈 나열하기</a></li>
<li><a class="reference internal" href="#describing-extension-modules">2.3. 확장 모듈 기술하기</a><ul>
<li><a class="reference internal" href="#extension-names-and-packages">2.3.1. 확장 이름과 패키지</a></li>
<li><a class="reference internal" href="#extension-source-files">2.3.2. 확장 소스 파일</a></li>
<li><a class="reference internal" href="#preprocessor-options">2.3.3. 전 처리기 옵션</a></li>
<li><a class="reference internal" href="#library-options">2.3.4. 라이브러리 옵션</a></li>
<li><a class="reference internal" href="#other-options">2.3.5. 다른 옵션</a></li>
</ul>
</li>
<li><a class="reference internal" href="#relationships-between-distributions-and-packages">2.4. 배포판과 패키지의 관계</a></li>
<li><a class="reference internal" href="#installing-scripts">2.5. 스크립트 설치하기</a></li>
<li><a class="reference internal" href="#installing-package-data">2.6. 패키지 데이터 설치하기</a></li>
<li><a class="reference internal" href="#installing-additional-files">2.7. 추가 파일 설치하기</a></li>
<li><a class="reference internal" href="#additional-meta-data">2.8. 추가 메타 데이터</a></li>
<li><a class="reference internal" href="#debugging-the-setup-script">2.9. 설정 스크립트 디버깅하기</a></li>
</ul>
</li>
</ul>

  <h4>이전 항목</h4>
  <p class="topless"><a href="introduction.html"
                        title="이전 장"><span class="section-number">1. </span>Distutils 소개</a></p>
  <h4>다음 항목</h4>
  <p class="topless"><a href="configfile.html"
                        title="다음 장"><span class="section-number">3. </span>설치 구성 파일 작성하기</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>탐색</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="전체 색인"
             >색인</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 모듈 목록"
             >모듈</a> |</li>
        <li class="right" >
          <a href="configfile.html" title="3. 설치 구성 파일 작성하기"
             >다음</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="1. Distutils 소개"
             >이전</a> |</li>

    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <a href="../index.html">설명서 </a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >파이썬 모듈 배포 (레거시 버전)</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="빠른 검색" type="text" name="q" />
          <input type="submit" value="이동" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">저작권</a> 2001-2020, Python Software Foundation.
    <br />
    한국어 번역 저작권 &copy; 2017-2020, Flowdas &amp; 역자. All rights reserved.
    </div>

  </body>
</html>